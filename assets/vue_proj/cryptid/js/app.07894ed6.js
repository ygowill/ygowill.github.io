(function(e){function t(t){for(var i,r,s=t[0],o=t[1],c=t[2],h=0,d=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(d.length)d.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,s=1;s<a.length;s++){var o=a[s];0!==n[o]&&(i=!1)}i&&(l.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},n={app:0},l=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=o;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Cryptid")],1)},l=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("诡影寻踪 网页助手 v1.0")]),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"never"}},[a("el-card",{attrs:{shadow:"never"}},[a("canvas",{staticStyle:{display:"block",margin:"50px auto"},attrs:{height:"520",id:"canvas",width:"570"},on:{click:e.handleMapClick}},[e._v(" 你的浏览器居然不支持Canvas？！赶快换一个吧！！ ")])]),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:12,type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:4}},[e._v(" 手动修改： ")]),a("el-col",{attrs:{span:12}},[a("el-radio-group",{model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[a("el-radio",{attrs:{label:0}},[e._v("添加/移除遮蔽")]),a("el-radio",{attrs:{label:1}},[e._v("添加/移除小屋")]),a("el-radio",{attrs:{label:2}},[e._v("添加/移除石柱")])],1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择","popper-class":"colorOptionsContent"},model:{value:e.chosenColor,callback:function(t){e.chosenColor=t},expression:"chosenColor"}},e._l(e.colorOption,(function(e){return a("el-option",{key:e.value,style:"background:"+e.value+"; color: "+e.font_color+"; width:100%; height:100%;",attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{on:{click:e.handleManualConfig}},[e._v(" "+e._s(this.manual_config_tip)+" ")])],1)],1),a("el-row",{attrs:{gutter:12,type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:4}},[e._v(" 尺寸调节： ")]),a("el-col",{attrs:{span:20}},[a("el-slider",{attrs:{min:10,max:50,"show-stops":""},on:{change:e.handleRchange},model:{value:e.r,callback:function(t){e.r=t},expression:"r"}})],1)],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:4}},[e._v(" 神秘代码： ")]),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{alignment:"left"},attrs:{type:"text",size:"small",placeholder:"请输入内容"},on:{input:e.handleCodeInputChange},model:{value:e.generatedCode,callback:function(t){e.generatedCode=t},expression:"generatedCode"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[this.manual_config_mode?e._e():a("el-card",{attrs:{shadow:"never"}},[a("h4",[e._v(" 线索对照表 ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.clueData,"row-style":{height:"0"},"cell-style":{padding:"0"}}},[a("el-table-column",{attrs:{prop:"clue",label:"线索",width:"240"}}),a("el-table-column",{attrs:{label:"yourself"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"mini",type:e.clue_state_list[t.$index][0].type},on:{click:function(a){return e.handleClueStateChange(t.$index,0)}}},[e._v(e._s(e.clue_state_list[t.$index][0].label)+" ")])]}}],null,!1,634225601)}),a("el-table-column",{attrs:{label:"player2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"mini",type:e.clue_state_list[t.$index][1].type},on:{click:function(a){return e.handleClueStateChange(t.$index,1)}}},[e._v(e._s(e.clue_state_list[t.$index][1].label)+" ")])]}}],null,!1,3811807424)}),a("el-table-column",{attrs:{label:"player3"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"mini",type:e.clue_state_list[t.$index][2].type},on:{click:function(a){return e.handleClueStateChange(t.$index,2)}}},[e._v(e._s(e.clue_state_list[t.$index][2].label)+" ")])]}}],null,!1,180395331)}),a("el-table-column",{attrs:{label:"player4"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"mini",type:e.clue_state_list[t.$index][3].type},on:{click:function(a){return e.handleClueStateChange(t.$index,3)}}},[e._v(e._s(e.clue_state_list[t.$index][3].label)+" ")])]}}],null,!1,1644945730)}),a("el-table-column",{attrs:{label:"player5"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"mini",type:e.clue_state_list[t.$index][4].type},on:{click:function(a){return e.handleClueStateChange(t.$index,4)}}},[e._v(e._s(e.clue_state_list[t.$index][4].label)+" ")])]}}],null,!1,1328971717)})],1)],1),this.manual_config_mode?a("el-card",{attrs:{shadow:"never"}},[a("el-row",[a("h4",[e._v(" Tips:拖动以调整排列，点击以旋转板块 ")])]),a("el-col",{staticClass:"draglist1",attrs:{span:12}},[a("draggable",{attrs:{group:"map_tile"},on:{end:e.handleDragEnd}},e._l(e.tile_list1,(function(t){return a("el-card",{key:t.id,staticClass:"dragItem",staticStyle:{margin:"20px","font-size":"60px"},attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-refresh",on:{click:e.handleDragClick}},[e._v(e._s(t.label))])])})),1)],1),a("el-col",{staticClass:"draglist2",attrs:{span:12}},[a("draggable",{attrs:{group:"map_tile"},on:{end:e.handleDragEnd}},e._l(e.tile_list2,(function(t){return a("el-card",{key:t.id,staticClass:"dragItem",staticStyle:{margin:"20px","font-size":"60px"},attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-refresh",on:{click:e.handleDragClick}},[e._v(e._s(t.label))])])})),1)],1)],1):e._e()],1)],1)],1)},s=[],o=a("b85c"),c=(a("d3b7"),a("25f0"),a("a434"),a("b0c0"),a("d81d"),a("e9c4"),a("fb6a"),a("a630"),a("3ca3"),a("ddb0"),a("cb29"),[{name:"在 森林 或 沙漠",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"D"},{name:"在 森林 或 海洋",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"W"},{name:"在 森林 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"S"},{name:"在 森林 或 山地",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"M"},{name:"在 沙漠 或 海洋",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"W"},{name:"在 沙漠 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"S"},{name:"在 沙漠 或 山地",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"M"},{name:"在 海洋 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"W",value2:"S"},{name:"在 海洋 或 山地",distance:0,type:"terrain",inverse:!1,value1:"W",value2:"M"},{name:"在 沼泽 或 山地",distance:0,type:"terrain",inverse:!1,value1:"S",value2:"M"},{name:"在 森林 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"F",value2:null},{name:"在 沙漠 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"D",value2:null},{name:"在 沼泽 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"S",value2:null},{name:"在 山地 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"M",value2:null},{name:"在 海洋 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"W",value2:null},{name:"在 任意动物领地 的1格距离内",distance:1,type:"animal",inverse:!1,value1:"B",value2:"C"},{name:"在 石柱 的2格距离内",distance:2,type:"structType",inverse:!1,value1:"O",value2:null},{name:"在 小屋 的2格距离内",distance:2,type:"structType",inverse:!1,value1:"T",value2:null},{name:"在 熊领地 的2格距离内",distance:2,type:"animal",inverse:!1,value1:"B",value2:null},{name:"在 狐狸领地 的2格距离内",distance:2,type:"animal",inverse:!1,value1:"C",value2:null},{name:"在 白色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"W",value2:null},{name:"在 蓝色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"B",value2:null},{name:"在 绿色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"G",value2:null},{name:"在 黑色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"D",value2:null},{name:"不在 森林 或 沙漠",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"D"},{name:"不在 森林 或 海洋",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"W"},{name:"不在 森林 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"S"},{name:"不在 森林 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"M"},{name:"不在 沙漠 或 海洋",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"W"},{name:"不在 沙漠 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"S"},{name:"不在 沙漠 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"M"},{name:"不在 海洋 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"W",value2:"S"},{name:"不在 海洋 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"W",value2:"M"},{name:"不在 沼泽 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"S",value2:"M"},{name:"不在 森林 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:null},{name:"不在 沙漠 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:null},{name:"不在 沼泽 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"S",value2:null},{name:"不在 山地 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"M",value2:null},{name:"不在 海洋 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"W",value2:null},{name:"不在 任意动物领地 的1格距离内",distance:1,type:"animal",inverse:!0,numValues:2,value1:"B",value2:"C"},{name:"不在 石柱 的2格距离内",distance:2,type:"structType",inverse:!0,numValues:1,value1:"O",value2:null},{name:"不在 小屋 的2格距离内",distance:2,type:"structType",inverse:!0,numValues:1,value1:"T",value2:null},{name:"不在 熊领地 的2格距离内",distance:2,type:"animal",inverse:!0,numValues:1,value1:"B",value2:null},{name:"不在 狐狸领地 的2格距离内",distance:2,type:"animal",inverse:!0,numValues:1,value1:"C",value2:null},{name:"不在 白色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"W",value2:null},{name:"不在 蓝色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"B",value2:null},{name:"不在 绿色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"G",value2:null},{name:"不在 黑色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"D",value2:null}]),u={F:"#159335",D:"#FECD0D",S:"#85338A",W:"#1E7DBB",M:"#999898"},h=[["W","S","S","W","S","S","W","W","D","W","D","D","F","F","D","F","F","F"],["S","S","S","F","S","M","F","F","M","F","D","M","F","D","M","F","D","D"],["S","S","M","S","S","M","F","F","M","F","M","M","F","W","W","W","W","W"],["D","D","D","D","D","D","M","M","D","M","W","F","M","W","F","M","W","F"],["S","S","D","S","D","D","S","D","W","M","W","W","M","M","W","M","M","W"],["D","M","M","D","M","W","S","S","W","S","S","W","S","F","W","F","F","F"]],d=[[0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],_=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],v=[[0,-1],[-1,0],[0,1],[1,1],[1,0],[1,-1]],p=[[-1,-1],[-1,0],[-1,1],[0,1],[1,0],[0,-1]],f={"#FFFFFF":"W","#000012":"D","#009A00":"G","#3232E8":"B"},m=a("b76a"),y=a.n(m),g=a("eb11"),x={name:"Cryptid",components:{draggable:y.a},mounted:function(){this.initCanvas(),this.initClue()},data:function(){return{a:2*Math.PI/6,map_width:12,map_height:9,tile_width:6,tile_height:3,r:30,map_detail:[],Point:function(e,t){this.x=e,this.y=t},randomIndexArray:[0,1,2,3,4,5],randomBoolArray:[!1,!1,!1,!1,!1,!1],clueData:[],mode:0,clue_state_list:[],click_x:0,click_y:0,generatedCode:"",manual_config_tip:"展开手动布局",manual_config_mode:!1,chosenColor:"#009A00",colorOption:[{label:"green",font_color:"white",value:"#009A00"},{label:"blue",font_color:"white",value:"#3232E8"},{label:"black",font_color:"white",value:"#000012"},{label:"white",font_color:"black",value:"#FFFFFF"}],tile_list1:[{id:0,label:"1"},{id:2,label:"3"},{id:4,label:"5"}],tile_list2:[{id:1,label:"2"},{id:3,label:"4"},{id:5,label:"6"}],ownClue:null,hut_info:[],stone_info:[],showPosition:!1}},methods:{initCanvas:function(){var e=document.getElementById("canvas");this.ctx=e.getContext("2d");for(var t=0;t<this.map_height;t++){this.map_detail[t]=[];for(var a=0;a<this.map_width;a++)this.map_detail[t][a]=0}this.randomIndexArray=this.generateRandomIndexArray(6),this.randomBoolArray=this.generateRandomBoolArray(6),this.regenerateMap()},handleMapClick:function(e){var t,a;(e.offsetX||0===e.offsetX)&&(t=e.offsetX,a=e.offsetY);var i=this.getNearestBlock(t,a),n="shadow";0===this.mode||(1===this.mode?(n="structure",this.checkHutExist(i["block_x_idx"],i["block_y_idx"])<0?this.addToHut(i["block_x_idx"],i["block_y_idx"],this.chosenColor):this.removeFromHut(i["block_x_idx"],i["block_y_idx"])):2===this.mode&&(n="structure",this.checkStoneExist(i["block_x_idx"],i["block_y_idx"])<0?this.addToStone(i["block_x_idx"],i["block_y_idx"],this.chosenColor):this.removeFromStone(i["block_x_idx"],i["block_y_idx"])));var l=this.checkHutExist(i["block_x_idx"],i["block_y_idx"]);l>=0?(i["hut"]=!0,i["hut_color"]=this.hut_info[l]["color"]):i["hut"]=!1;var r=this.checkStoneExist(i["block_x_idx"],i["block_y_idx"]);r>=0?(i["stone"]=!0,i["stone_color"]=this.stone_info[r]["color"]):i["stone"]=!1,this.redraw_block(i,n)},handleCodeInputChange:function(e){var t="N4IglgdgJgpgHgfQIYCcVIJ4gFwG0"+e+"A";try{var a=g.decompressFromEncodedURIComponent(t),i=JSON.parse(a),n=i["flip_array"];for(var l in n)n[l]||(h[l].reverse(),d[l].reverse(),_[l].reverse());this.generateMap(i)}catch(r){this.generatedCode="无法解析神秘代码，请重新输入"}},handleManualConfig:function(){if(this.manual_config_mode=!this.manual_config_mode,"展开手动布局"===this.manual_config_tip?this.manual_config_tip="展开线索提示":this.manual_config_tip="展开手动布局",this.manual_config_mode){var e={index_array:[0,1,2,3,4,5,6],flip_array:[!1,!1,!1,!1,!1,!1]};this.generateMap(e)}else this.regenerateMap()},handleDragClick:function(e){if(3===this.tile_list1.length){var t=parseInt(e.path[0].childNodes[0].data)-1;this.randomBoolArray[t]=!this.randomBoolArray[t],this.$notify({title:"成功",message:"已成功旋转板块"+(t+1).toString(),duration:1e3}),h[t].reverse(),d[t].reverse(),_[t].reverse(),this.regenerateMap()}else this.$notify({title:"错误",message:"请将板块排列成3*2的形状后再旋转",duration:1e3})},handleDragEnd:function(e){var t=e.oldIndex,a=e.newIndex,i=null;if(-1!==e.from.parentNode.className.indexOf("draglist1")?(i=this.tile_list1[t],this.tile_list1.splice(t,1)):-1!==e.from.parentNode.className.indexOf("draglist2")&&(i=this.tile_list2[t],this.tile_list2.splice(t,1)),-1!==e.to.parentNode.className.indexOf("draglist1")?this.tile_list1.splice(a,0,i):-1!==e.to.parentNode.className.indexOf("draglist2")&&this.tile_list2.splice(a,0,i),3===this.tile_list1.length){console.log("index array before",this.randomIndexArray),console.log("flip array before",this.randomBoolArray);var n={};for(var l in this.randomIndexArray)n[this.randomIndexArray[l]]=this.randomBoolArray[l];for(var r=[],s=0;s<3;s++)r.push(this.tile_list1[s].id),r.push(this.tile_list2[s].id);this.randomIndexArray=r;var o=[];for(var c in this.randomIndexArray)o.push(n[this.randomIndexArray[c]]);this.randomBoolArray=o,console.log("index array after",this.randomIndexArray),console.log("flip array after",this.randomBoolArray),this.regenerateMap()}else this.$notify({title:"错误",message:"无法生成地图，请将板块排列成3*2的形状",duration:1e3})},initClue:function(){this.clueData=[];var e,t=Object(o["a"])(c);try{for(t.s();!(e=t.n()).done;){var a=e.value;!1===a.inverse&&this.clueData.push({clue:a.name})}}catch(r){t.e(r)}finally{t.f()}for(var i=this.clueData.length,n=0;n<i;n++){this.clue_state_list[n]=[];for(var l=0;l<5;l++)this.clue_state_list[n][l]=0===l?{label:"No!",type:"danger"}:{label:"Maybe",type:""}}},handleClueStateChange:function(e,t){if("Maybe"===this.clue_state_list[e][t].label?this.clue_state_list[e][t]={label:"Inverse",type:"warning"}:"Inverse"===this.clue_state_list[e][t].label?this.clue_state_list[e][t]={label:"No!",type:"danger"}:this.clue_state_list[e][t]={label:"Maybe",type:""},0===t)for(var a=0;a<this.clue_state_list.length;a++)a!==e&&(this.clue_state_list[a][0]={label:"No!",type:"danger"});for(var i=0,n=0,l=0;l<this.clue_state_list.length;l++)"No!"!==this.clue_state_list[l][t].label&&(i++,n=l);1===i&&"Inverse"!==this.clue_state_list[n][t].label&&(this.clue_state_list[n][t]={label:"Yes!",type:"success"}),this.$set(this.clue_state_list,e,this.clue_state_list[e]);var r=this.clue_state_list.map((function(e){return e[0]})),s=-1;for(var o in r)if("Yes!"===r[o].label){s=o;break}this.ownClue=c[s],0===t&&this.generateClueShadow()},drawDigits:function(){for(var e=document.getElementById("canvas"),t=e.height/6,a=0;a<3;a++){for(var i=e.width/4,n=0;n<2;n++){var l=2*a+n;this.ctx.font="60px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="black",this.ctx.fillText((this.randomIndexArray[l]+1).toString(),i,t),i+=e.width/2}t+=e.height/3}},drawBlockInfo:function(e){this.ctx.font="15px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="white";var t=e["block_x_idx"].toString()+","+e["block_y_idx"];this.ctx.fillText(t,e["block_center_x"],e["block_center_y"]+this.r/4)},generateMap:function(e){var t=JSON.stringify(e),a=g.compressToEncodedURIComponent(t);this.generatedCode=a.slice("N4IglgdgJgpgHgfQIYCcVIJ4gFwG0".length,-1),this.randomIndexArray=e["index_array"],this.randomBoolArray=e["flip_array"];for(var i=this.r*Math.sin(this.a),n=0;n<3;n++){for(var l=this.r,r=0;r<2;r++){var s=this.randomIndexArray[2*n+r],o={tile_id:s,tile_start_x:r,tile_start_y:n,tile:h[s],bear:d[s],cougar:_[s],flip:this.randomBoolArray[2*n+r]};this.drawTile(l,i,o),l+=9*this.r+.25*this.r}i+=6*this.r*Math.sin(this.a)+.4*this.r}this.manual_config_mode&&this.drawDigits()},generateRandomBoolArray:function(e){for(var t=[],a=0;a<e;a++)t.push(Math.random()<.5);return t},generateRandomIndexArray:function(e){for(var t=Array.from(new Array(e).keys()),a=1;a<t.length;a++){var i=Math.floor(Math.random()*(a+1)),n=[t[i],t[a]];t[a]=n[0],t[i]=n[1]}return t},drawTile:function(e,t,a){for(var i=e,n=0;n<this.tile_width;n++){for(var l=t+(n%2===0?0:this.r*Math.sin(this.a)),r=0;r<this.tile_height;r++){var s=n*this.tile_height+r,o={tile_id:a["tile_id"],block_id:s,block_center_x:i,block_center_y:l,block_x_idx:6*a["tile_start_x"]+n,block_y_idx:3*a["tile_start_y"]+r,block:a["tile"][s],bear:a["bear"][s],cougar:a["cougar"][s],shadow:!1,flip:a["flip"],hut:!1,hut_color:"black",stone:!1,stone_color:"black",block_type:["terrain"]};(o["bear"]||o["cougar"])&&o["block_type"].push("animal"),(o["hut"]||o["stone"])&&o["block_type"].push("structure");var c=this.checkHutExist(o["block_x_idx"],o["block_y_idx"]);c>=0&&(o["hut"]=!0,o["hut_color"]=this.hut_info[c]["color"]);var u=this.checkStoneExist(o["block_x_idx"],o["block_y_idx"]);u>=0&&(o["stone"]=!0,o["stone_color"]=this.stone_info[u]["color"]),this.map_detail[o["block_y_idx"]][o["block_x_idx"]]=o,this.drawHexagon(i,l,o),l+=2*this.r*Math.sin(this.a)}i+=this.r*(1+Math.cos(this.a))}},drawHexagon:function(e,t,a){this.ctx.beginPath();for(var i=0;i<6;i++)this.ctx.lineTo(e+this.r*Math.cos(this.a*i),t+this.r*Math.sin(this.a*i));this.ctx.closePath(),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="white";var n=a["block"];this.ctx.fillStyle=u[n],this.ctx.fill(),this.ctx.stroke(),this.drawAnimal(a),this.drawStructure(a),this.showPosition&&this.drawBlockInfo(a)},getPolygonPoints:function(e,t,a,i,n){for(var l=[],r=n||0,s=0;s<i;++s)l.push(new this.Point(e+a*Math.sin(r),t+a*Math.cos(r))),r+=2*Math.PI/i;return l},createPolygonPath:function(e,t,a,i,n){var l=this.getPolygonPoints(e,t,a,i,n);this.ctx.beginPath(),this.ctx.moveTo(l[0].x,l[0].y);for(var r=0;r<i;++r)this.ctx.lineTo(l[r].x,l[r].y);this.ctx.closePath()},createAnimalRegion:function(e,t,a){this.createPolygonPath(e,t,.8*this.r,6,Math.PI/6),this.ctx.setLineDash([7,5]),this.ctx.strokeStyle=a,this.ctx.stroke()},createStructureRegion:function(e,t,a,i){var n=4,l=0;"stone"===a?(n=8,l=Math.PI/8):"hut"===a&&(n=3,l=Math.PI/3),this.createPolygonPath(e,t,this.r/2,n,l),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.fillStyle=i,this.ctx.fill(),this.ctx.stroke()},getNearestBlock:function(e,t){var a,i=1e7,n=null,l=Object(o["a"])(this.map_detail);try{for(l.s();!(a=l.n()).done;){var r,s=a.value,c=Object(o["a"])(s);try{for(c.s();!(r=c.n()).done;){var u=r.value,h=Math.pow(e-u.block_center_x,2)+Math.pow(t-u.block_center_y,2);h<i&&(i=h,n=u)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){l.e(d)}finally{l.f()}return n},redraw_block:function(e,t){var a=e.block_center_x,i=e.block_center_y,n=e.block_x_idx,l=e.block_y_idx;"shadow"===t?(e.shadow?this.drawHexagon(a,i,e):(this.drawShadow(a,i),this.drawAnimal(e)),this.drawStructure(e),this.map_detail[l][n].shadow=!this.map_detail[l][n].shadow):(this.drawHexagon(a,i,e),e.shadow&&this.drawShadow(a,i),this.drawAnimal(e),this.drawStructure(e)),this.manual_config_mode&&this.drawDigits(),this.showPosition&&this.drawBlockInfo(e)},drawShadow:function(e,t){this.createPolygonPath(e,t,this.r,6,Math.PI/6),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.ctx.fillStyle="rgba(0, 0, 0, 0.75)",this.ctx.fill(),this.ctx.stroke()},drawAnimal:function(e){var t=e["block_center_x"],a=e["block_center_y"];e["bear"]?this.createAnimalRegion(t,a,"black"):e["cougar"]&&this.createAnimalRegion(t,a,"red")},drawStructure:function(e){var t=e["block_center_x"],a=e["block_center_y"];e["hut"]?this.createStructureRegion(t,a,"hut",e["hut_color"]):e["stone"]&&this.createStructureRegion(t,a,"stone",e["stone_color"])},generateClueShadow:function(){this.regenerateMap();for(var e=[],t=[],a=0;a<this.map_detail.length;a++){e[a]=[];for(var i=0;i<this.map_detail[0].length;i++){e[a][i]=!1;var n=!1;"terrain"===this.ownClue.type?(this.map_detail[a][i].block===this.ownClue.value1||null!==this.ownClue.value2&&this.map_detail[a][i].block===this.ownClue.value2)&&(n=!0):"animal"===this.ownClue.type?null===this.ownClue.value2?("C"===this.ownClue.value1&&this.map_detail[a][i].cougar||"B"===this.ownClue.value1&&this.map_detail[a][i].bear)&&(n=!0):(this.map_detail[a][i].bear||this.map_detail[a][i].cougar)&&(n=!0):"structType"===this.ownClue.type?("O"===this.ownClue.value1&&this.map_detail[a][i].stone||"T"===this.ownClue.value1&&this.map_detail[a][i].hut)&&(n=!0):"structColor"===this.ownClue.type&&(this.map_detail[a][i].hut&&(n=f[this.map_detail[a][i].hut_color]===this.ownClue.value1),this.map_detail[a][i].stone&&(n=f[this.map_detail[a][i].stone_color]===this.ownClue.value1)),n?(t.push(this.map_detail[a][i]),e[a][i]=!0,this.map_detail[a][i].shadow=!0):this.map_detail[a][i].shadow=!1,this.redraw_block(this.map_detail[a][i],"shadow")}}var l=0;while(l<this.ownClue.distance){l+=1;var r=[];while(0!==t.length){var s=t[0];t.splice(0,1);var o=s.block_y_idx,c=s.block_x_idx,u=c%2===0?p:v;for(var h in u){var d=u[h][0],_=u[h][1],m=o+d,y=c+_;m>=0&&m<e.length&&y>=0&&y<e[0].length&&!e[m][y]&&(e[m][y]=!0,r.push(this.map_detail[m][y]),this.map_detail[m][y].shadow=!0,this.redraw_block(this.map_detail[m][y],"shadow"))}}t=r}},regenerateMap:function(){this.generateMap({index_array:this.randomIndexArray,flip_array:this.randomBoolArray})},checkHutExist:function(e,t){for(var a in this.hut_info)if(this.hut_info[a].x===e&&this.hut_info[a].y===t)return a;return-1},addToHut:function(e,t,a){this.hut_info.push({x:e,y:t,color:a})},removeFromHut:function(e,t){for(var a in this.hut_info)this.hut_info[a].x===e&&this.hut_info[a].y===t&&this.hut_info.splice(a,1)},checkStoneExist:function(e,t){for(var a in this.stone_info)if(this.stone_info[a].x===e&&this.stone_info[a].y===t)return a;return-1},addToStone:function(e,t,a){this.stone_info.push({x:e,y:t,color:a})},removeFromStone:function(e,t){for(var a in this.stone_info)this.stone_info[a].x===e&&this.stone_info[a].y===t&&this.stone_info.splice(a,1)},handleRchange:function(){var e=document.getElementById("canvas"),t=e.width,a=e.height;this.ctx.clearRect(0,0,t,a),this.regenerateMap()}}},b=x,k=(a("b954"),a("2877")),w=Object(k["a"])(b,r,s,!1,null,"50dcf9c0",null),C=w.exports,S={name:"App",components:{Cryptid:C}},M=S,D=(a("034f"),Object(k["a"])(M,n,l,!1,null,null,null)),F=D.exports,A=a("5c96"),I=a.n(A);a("0fae");i["default"].config.productionTip=!1,i["default"].use(I.a),new i["default"]({render:function(e){return e(F)}}).$mount("#app")},"85ec":function(e,t,a){},b954:function(e,t,a){"use strict";a("c31f")},c31f:function(e,t,a){}});
//# sourceMappingURL=app.07894ed6.js.map