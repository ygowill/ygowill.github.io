(function(e){function t(t){for(var i,s,r=t[0],o=t[1],c=t[2],h=0,d=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(l,s)&&l[s]&&d.push(l[s][0]),l[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,r=1;r<a.length;r++){var o=a[r];0!==l[o]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},l={app:0},n=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"09d0":function(e,t,a){},"351c":function(e,t,a){"use strict";a("09d0")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),l=a("a925"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Cryptid")],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("h2",[e._v("诡影寻踪 网页助手 v1.0")]),a("div",{staticClass:"main_content"},[a("el-card",{staticClass:"col1",attrs:{shadow:"never"}},[a("el-card",{staticClass:"canvas_card",attrs:{shadow:"never"}},[a("canvas",{staticStyle:{display:"block"},attrs:{height:"520",id:"canvas",width:"570"},on:{click:e.handleMapClick}},[e._v(" 你的浏览器居然不支持Canvas？！赶快换一个吧！！ ")])]),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:12,type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:8}},[e._v(" 尺寸调节： ")]),a("el-col",{attrs:{span:16}},[a("el-slider",{attrs:{min:10,max:50},on:{change:e.handleRChange},model:{value:e.r,callback:function(t){e.r=t},expression:"r"}})],1)],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:12,type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-radio-group",{attrs:{size:"small",type:"vertical"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[a("el-radio",{attrs:{label:0}},[e._v("添加/移除遮蔽")]),a("el-radio",{attrs:{label:1}},[e._v("添加/移除小屋")]),a("el-radio",{attrs:{label:2}},[e._v("添加/移除石柱")])],1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择","popper-class":"colorOptionsContent"},model:{value:e.chosenColor,callback:function(t){e.chosenColor=t},expression:"chosenColor"}},e._l(e.colorOption,(function(e){return a("el-option",{key:e.value,style:"background:"+e.value+"; color: "+e.font_color+"; width:100%; height:100%;",attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:e.handleManualConfig}},[e._v(" "+e._s(this.manual_config_tip)+" ")])],1)],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:8}},[e._v(" 神秘代码： ")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{alignment:"left"},attrs:{type:"text",size:"small",placeholder:"请输入内容"},on:{input:e.handleCodeInputChange},model:{value:e.generatedCode,callback:function(t){e.generatedCode=t},expression:"generatedCode"}})],1)],1)],1)],1),this.manual_config_mode?e._e():a("el-card",{staticClass:"clue_table",attrs:{shadow:"never"}},[a("h4",[e._v(" 线索对照表 ")]),a("el-table",{ref:"clue_table",staticStyle:{width:"100%"},attrs:{data:e.clueData,"row-style":{height:"0"}}},[a("el-table-column",{attrs:{prop:"clue",label:"线索",width:"240",fixed:""}}),a("el-table-column",{attrs:{label:"yourself"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"small",type:e.clue_state_list[t.$index][0].type},on:{click:function(a){return e.handleClueStateChange(t.$index,0)}}},[e._v(e._s(e.clue_state_list[t.$index][0].label)+" ")])]}}],null,!1,4106166173)}),a("el-table-column",{attrs:{label:"player2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"small",type:e.clue_state_list[t.$index][1].type},on:{click:function(a){return e.handleClueStateChange(t.$index,1)}}},[e._v(e._s(e.clue_state_list[t.$index][1].label)+" ")])]}}],null,!1,2203260732)}),a("el-table-column",{attrs:{label:"player3"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"small",type:e.clue_state_list[t.$index][2].type},on:{click:function(a){return e.handleClueStateChange(t.$index,2)}}},[e._v(e._s(e.clue_state_list[t.$index][2].label)+" ")])]}}],null,!1,3614142815)}),a("el-table-column",{attrs:{label:"player4"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"small",type:e.clue_state_list[t.$index][3].type},on:{click:function(a){return e.handleClueStateChange(t.$index,3)}}},[e._v(e._s(e.clue_state_list[t.$index][3].label)+" ")])]}}],null,!1,3621487614)}),a("el-table-column",{attrs:{label:"player5"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"checklist_button",attrs:{size:"small",type:e.clue_state_list[t.$index][4].type},on:{click:function(a){return e.handleClueStateChange(t.$index,4)}}},[e._v(e._s(e.clue_state_list[t.$index][4].label)+" ")])]}}],null,!1,2391687705)})],1)],1),this.manual_config_mode?a("el-card",{staticClass:"tile_arrangement",attrs:{shadow:"never"}},[a("el-row",[a("h4",[e._v(" Tips:拖动以调整排列，点击以旋转板块 ")])]),a("el-col",{staticClass:"draglist1",attrs:{span:12}},[a("draggable",{attrs:{group:"map_tile"},on:{end:e.handleDragEnd}},e._l(e.tile_list1,(function(t){return a("el-card",{key:t.id,staticClass:"dragItem",staticStyle:{margin:"20px","font-size":"60px"},attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-refresh",on:{click:e.handleDragClick}},[e._v(e._s(t.label))])])})),1)],1),a("el-col",{staticClass:"draglist2",attrs:{span:12}},[a("draggable",{attrs:{group:"map_tile"},on:{end:e.handleDragEnd}},e._l(e.tile_list2,(function(t){return a("el-card",{key:t.id,staticClass:"dragItem",staticStyle:{margin:"20px","font-size":"60px"},attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-refresh",on:{click:e.handleDragClick}},[e._v(e._s(t.label))])])})),1)],1)],1):e._e()],1)])},o=[],c=a("b85c"),u=(a("d3b7"),a("25f0"),a("d81d"),a("e9c4"),a("a434"),a("b0c0"),a("fb6a"),a("cb29"),[{name:"在 森林 或 沙漠",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"D"},{name:"在 森林 或 海洋",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"W"},{name:"在 森林 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"S"},{name:"在 森林 或 山地",distance:0,type:"terrain",inverse:!1,value1:"F",value2:"M"},{name:"在 沙漠 或 海洋",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"W"},{name:"在 沙漠 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"S"},{name:"在 沙漠 或 山地",distance:0,type:"terrain",inverse:!1,value1:"D",value2:"M"},{name:"在 海洋 或 沼泽",distance:0,type:"terrain",inverse:!1,value1:"W",value2:"S"},{name:"在 海洋 或 山地",distance:0,type:"terrain",inverse:!1,value1:"W",value2:"M"},{name:"在 沼泽 或 山地",distance:0,type:"terrain",inverse:!1,value1:"S",value2:"M"},{name:"在 森林 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"F",value2:null},{name:"在 沙漠 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"D",value2:null},{name:"在 沼泽 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"S",value2:null},{name:"在 山地 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"M",value2:null},{name:"在 海洋 的1格距离内",distance:1,type:"terrain",inverse:!1,value1:"W",value2:null},{name:"在 任意动物领地 的1格距离内",distance:1,type:"animal",inverse:!1,value1:"B",value2:"C"},{name:"在 石柱 的2格距离内",distance:2,type:"structType",inverse:!1,value1:"O",value2:null},{name:"在 小屋 的2格距离内",distance:2,type:"structType",inverse:!1,value1:"T",value2:null},{name:"在 熊领地 的2格距离内",distance:2,type:"animal",inverse:!1,value1:"B",value2:null},{name:"在 狐狸领地 的2格距离内",distance:2,type:"animal",inverse:!1,value1:"C",value2:null},{name:"在 白色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"W",value2:null},{name:"在 蓝色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"B",value2:null},{name:"在 绿色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"G",value2:null},{name:"在 黑色地标 的3格距离内",distance:3,type:"structColor",inverse:!1,value1:"D",value2:null},{name:"不在 森林 或 沙漠",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"D"},{name:"不在 森林 或 海洋",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"W"},{name:"不在 森林 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"S"},{name:"不在 森林 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:"M"},{name:"不在 沙漠 或 海洋",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"W"},{name:"不在 沙漠 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"S"},{name:"不在 沙漠 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:"M"},{name:"不在 海洋 或 沼泽",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"W",value2:"S"},{name:"不在 海洋 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"W",value2:"M"},{name:"不在 沼泽 或 山地",distance:0,type:"terrain",inverse:!0,numValues:2,value1:"S",value2:"M"},{name:"不在 森林 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:2,value1:"F",value2:null},{name:"不在 沙漠 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:2,value1:"D",value2:null},{name:"不在 沼泽 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"S",value2:null},{name:"不在 山地 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"M",value2:null},{name:"不在 海洋 的1格距离内",distance:1,type:"terrain",inverse:!0,numValues:1,value1:"W",value2:null},{name:"不在 任意动物领地 的1格距离内",distance:1,type:"animal",inverse:!0,numValues:2,value1:"B",value2:"C"},{name:"不在 石柱 的2格距离内",distance:2,type:"structType",inverse:!0,numValues:1,value1:"O",value2:null},{name:"不在 小屋 的2格距离内",distance:2,type:"structType",inverse:!0,numValues:1,value1:"T",value2:null},{name:"不在 熊领地 的2格距离内",distance:2,type:"animal",inverse:!0,numValues:1,value1:"B",value2:null},{name:"不在 狐狸领地 的2格距离内",distance:2,type:"animal",inverse:!0,numValues:1,value1:"C",value2:null},{name:"不在 白色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"W",value2:null},{name:"不在 蓝色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"B",value2:null},{name:"不在 绿色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"G",value2:null},{name:"不在 黑色地标 的3格距离内",distance:3,type:"structColor",inverse:!0,numValues:1,value1:"D",value2:null}]),h={F:"#159335",D:"#FECD0D",S:"#85338A",W:"#1E7DBB",M:"#999898"},d=[["W","S","S","W","S","S","W","W","D","W","D","D","F","F","D","F","F","F"],["S","S","S","F","S","M","F","F","M","F","D","M","F","D","M","F","D","D"],["S","S","M","S","S","M","F","F","M","F","M","M","F","W","W","W","W","W"],["D","D","D","D","D","D","M","M","D","M","W","F","M","W","F","M","W","F"],["S","S","D","S","D","D","S","D","W","M","W","W","M","M","W","M","M","W"],["D","M","M","D","M","W","S","S","W","S","S","W","S","F","W","F","F","F"]],_=[[0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],v=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],p=[[0,-1],[-1,0],[0,1],[1,1],[1,0],[1,-1]],f=[[-1,-1],[-1,0],[-1,1],[0,1],[1,0],[0,-1]],m=[{index:0,flip:!1},{index:1,flip:!1},{index:2,flip:!1},{index:3,flip:!1},{index:4,flip:!1},{index:5,flip:!1}],y={"#FFFFFF":"W","#000012":"D","#009A00":"G","#3232E8":"B"},b=a("b76a"),g=a.n(b),x=a("eb11"),k={name:"Cryptid",components:{draggable:g.a},watch:{clueData:function(){this.doLayout()}},mounted:function(){this.initCanvas(),this.initClue()},data:function(){return{a:2*Math.PI/6,map_width:12,map_height:9,tile_width:6,tile_height:3,r:30,map_detail:[],Point:function(e,t){this.x=e,this.y=t},board_tile_state:[],clueData:[],mode:0,clue_state_list:[],click_x:0,click_y:0,generatedCode:"",manual_config_tip:"展开手动布局",manual_config_mode:!1,chosenColor:"#009A00",colorOption:[{label:"green",font_color:"white",value:"#009A00"},{label:"blue",font_color:"white",value:"#3232E8"},{label:"black",font_color:"white",value:"#000012"},{label:"white",font_color:"black",value:"#FFFFFF"}],tile_list1:[{id:0,label:"1"},{id:2,label:"3"},{id:4,label:"5"}],tile_list2:[{id:1,label:"2"},{id:3,label:"4"},{id:5,label:"6"}],ownClue:null,hut_info:[],stone_info:[],showPosition:!1,map:[],bear:[],cougar:[]}},methods:{initCanvas:function(){var e=document.getElementById("canvas"),t=document.documentElement.clientWidth,a=document.documentElement.clientHeight;if(console.log("height:",a," width:",t),t>=1e3){e.height=520,e.width=580;var i=document.getElementsByClassName("col1")[0];i.style.width=(1.15*e.height).toString()+"px",this.r=e.height/20}else{e.height=.8*t,e.width=.8*t,this.r=e.height/20;var l=document.getElementsByClassName("clue_table")[0],n=document.getElementsByClassName("col1")[0],s=document.getElementsByClassName("canvas_card")[0];console.log(l,n),n.style.width=l.style.width.toString()+"px",s.style.height=(1.15*e.height).toString()+"px"}this.ctx=e.getContext("2d");for(var r=0;r<this.map_height;r++){this.map_detail[r]=[];for(var o=0;o<this.map_width;o++)this.map_detail[r][o]=0}this.map=JSON.parse(JSON.stringify(d)),this.bear=JSON.parse(JSON.stringify(_)),this.cougar=JSON.parse(JSON.stringify(v)),this.board_tile_state=JSON.parse(JSON.stringify(m)),this.board_tile_state.shuffle(),this.randomFlip(),this.generateMap()},handleMapClick:function(e){var t,a;(e.offsetX||0===e.offsetX)&&(t=e.offsetX,a=e.offsetY);var i=this.getNearestBlock(t,a),l="shadow";0===this.mode||(1===this.mode?(l="structure",this.checkHutExist(i["block_x_idx"],i["block_y_idx"])<0?this.addToHut(i["block_x_idx"],i["block_y_idx"],this.chosenColor):this.removeFromHut(i["block_x_idx"],i["block_y_idx"])):2===this.mode&&(l="structure",this.checkStoneExist(i["block_x_idx"],i["block_y_idx"])<0?this.addToStone(i["block_x_idx"],i["block_y_idx"],this.chosenColor):this.removeFromStone(i["block_x_idx"],i["block_y_idx"])));var n=this.checkHutExist(i["block_x_idx"],i["block_y_idx"]);n>=0?(i["hut"]=!0,i["hut_color"]=this.hut_info[n]["color"]):i["hut"]=!1;var s=this.checkStoneExist(i["block_x_idx"],i["block_y_idx"]);s>=0?(i["stone"]=!0,i["stone_color"]=this.stone_info[s]["color"]):i["stone"]=!1,this.redraw_block(i,l)},handleCodeInputChange:function(e){var t="N4IglgdgJgpgHiAXAbQ"+e+"AvkA";try{for(var a=x.decompressFromEncodedURIComponent(t),i=JSON.parse(a),l=0;l<i["index"].length;l++)this.board_tile_state[l].flip=1===i["flip"][l],this.board_tile_state[l].index=i["index"][l];for(var n=0;n<i["flip"].length;n++)if(1===i["flip"][n]){var s=i["index"][n];this.map[s].reverse(),this.bear[s].reverse(),this.cougar[s].reverse()}this.generateMap()}catch(r){this.generatedCode="无法解析神秘代码，请重新输入"}},handleManualConfig:function(){this.manual_config_mode=!this.manual_config_mode,"展开手动布局"===this.manual_config_tip?this.manual_config_tip="展开线索提示":this.manual_config_tip="展开手动布局",this.manual_config_mode&&(this.map=JSON.parse(JSON.stringify(d)),this.bear=JSON.parse(JSON.stringify(_)),this.cougar=JSON.parse(JSON.stringify(v)),this.board_tile_state=JSON.parse(JSON.stringify(m))),this.generateMap()},handleDragClick:function(e){if(3===this.tile_list1.length){for(var t=parseInt(e.path[0].childNodes[0].data)-1,a=0,i=0;i<this.board_tile_state.length;i++)if(this.board_tile_state[i].index===t){a=i;break}this.board_tile_state[a].flip=!this.board_tile_state[a].flip,this.$notify({title:"成功",message:"已成功旋转板块"+(t+1).toString(),duration:1e3}),this.map[t].reverse(),this.bear[t].reverse(),this.cougar[t].reverse(),this.generateMap()}else this.$notify({title:"错误",message:"请将板块排列成3*2的形状后再旋转",duration:1e3})},handleDragEnd:function(e){var t=e.oldIndex,a=e.newIndex,i=null;if(-1!==e.from.parentNode.className.indexOf("draglist1")?(i=this.tile_list1[t],this.tile_list1.splice(t,1)):-1!==e.from.parentNode.className.indexOf("draglist2")&&(i=this.tile_list2[t],this.tile_list2.splice(t,1)),-1!==e.to.parentNode.className.indexOf("draglist1")?this.tile_list1.splice(a,0,i):-1!==e.to.parentNode.className.indexOf("draglist2")&&this.tile_list2.splice(a,0,i),3===this.tile_list1.length){for(var l=[],n=0;n<3;n++)l.push(this.board_tile_state[s(this.tile_list1[n].id,this.board_tile_state)]),l.push(this.board_tile_state[s(this.tile_list2[n].id,this.board_tile_state)]);this.board_tile_state=l,this.generateMap()}else this.$notify({title:"错误",message:"无法生成地图，请将板块排列成3*2的形状",duration:1e3});function s(e,t){for(var a in t)if(e===t[a].index)return a;return-1}},initClue:function(){this.clueData=[];var e,t=Object(c["a"])(u);try{for(t.s();!(e=t.n()).done;){var a=e.value;!1===a.inverse&&this.clueData.push({clue:a.name})}}catch(s){t.e(s)}finally{t.f()}for(var i=this.clueData.length,l=0;l<i;l++){this.clue_state_list[l]=[];for(var n=0;n<5;n++)this.clue_state_list[l][n]=0===n?{label:"No!",type:"danger"}:{label:"Maybe",type:""}}},handleClueStateChange:function(e,t){if("Maybe"===this.clue_state_list[e][t].label?this.clue_state_list[e][t]={label:"Inverse",type:"warning"}:"Inverse"===this.clue_state_list[e][t].label?this.clue_state_list[e][t]={label:"No!",type:"danger"}:this.clue_state_list[e][t]={label:"Maybe",type:""},0===t)for(var a=0;a<this.clue_state_list.length;a++)a!==e&&(this.clue_state_list[a][0]={label:"No!",type:"danger"});for(var i=0,l=0,n=0;n<this.clue_state_list.length;n++)"No!"!==this.clue_state_list[n][t].label&&(i++,l=n);1===i&&"Inverse"!==this.clue_state_list[l][t].label&&(this.clue_state_list[l][t]={label:"Yes!",type:"success"}),this.$set(this.clue_state_list,e,this.clue_state_list[e]);var s=this.clue_state_list.map((function(e){return e[0]})),r=-1;for(var o in s)if("Yes!"===s[o].label){r=o;break}this.ownClue=u[r],0===t&&this.generateClueShadow()},drawDigits:function(){for(var e=document.getElementById("canvas"),t=e.height/6,a=0;a<3;a++){for(var i=e.width/4,l=0;l<2;l++){var n=2*a+l;this.ctx.font="60px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="black",this.ctx.fillText((this.board_tile_state[n].index+1).toString(),i,t),i+=e.width/2}t+=e.height/3}},drawBlockInfo:function(e){this.ctx.font="15px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="white";var t=e["block_x_idx"].toString()+","+e["block_y_idx"];this.ctx.fillText(t,e["block_center_x"],e["block_center_y"]+this.r/4)},generateMap:function(){for(var e={index:[],flip:[]},t=0;t<6;t++)e["index"].push(this.board_tile_state[t].index),e["flip"].push(this.board_tile_state[t].flip?1:0);var a=JSON.stringify(e),i=x.compressToEncodedURIComponent(a);this.generatedCode=i.slice("N4IglgdgJgpgHiAXAbQ".length,-1);for(var l=this.r*Math.sin(this.a),n=0;n<3;n++){for(var s=this.r,r=0;r<2;r++){var o=this.board_tile_state[2*n+r].index,c={tile_id:o,tile_start_x:r,tile_start_y:n,tile:this.map[o],bear:this.bear[o],cougar:this.cougar[o],flip:this.board_tile_state[2*n+r].flip};this.drawTile(s,l,c),s+=9*this.r+.25*this.r}l+=6*this.r*Math.sin(this.a)+.4*this.r}this.manual_config_mode&&this.drawDigits()},drawTile:function(e,t,a){for(var i=e,l=0;l<this.tile_width;l++){for(var n=t+(l%2===0?0:this.r*Math.sin(this.a)),s=0;s<this.tile_height;s++){var r=l*this.tile_height+s,o={tile_id:a["tile_id"],block_id:r,block_center_x:i,block_center_y:n,block_x_idx:6*a["tile_start_x"]+l,block_y_idx:3*a["tile_start_y"]+s,block:a["tile"][r],bear:a["bear"][r],cougar:a["cougar"][r],shadow:!1,flip:a["flip"],hut:!1,hut_color:"black",stone:!1,stone_color:"black",block_type:["terrain"]};(o["bear"]||o["cougar"])&&o["block_type"].push("animal"),(o["hut"]||o["stone"])&&o["block_type"].push("structure");var c=this.checkHutExist(o["block_x_idx"],o["block_y_idx"]);c>=0&&(o["hut"]=!0,o["hut_color"]=this.hut_info[c]["color"]);var u=this.checkStoneExist(o["block_x_idx"],o["block_y_idx"]);u>=0&&(o["stone"]=!0,o["stone_color"]=this.stone_info[u]["color"]),this.map_detail[o["block_y_idx"]][o["block_x_idx"]]=o,this.drawHexagon(i,n,o),n+=2*this.r*Math.sin(this.a)}i+=this.r*(1+Math.cos(this.a))}},drawHexagon:function(e,t,a){this.ctx.beginPath();for(var i=0;i<6;i++)this.ctx.lineTo(e+this.r*Math.cos(this.a*i),t+this.r*Math.sin(this.a*i));this.ctx.closePath(),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="white";var l=a["block"];this.ctx.fillStyle=h[l],this.ctx.fill(),this.ctx.stroke(),this.drawAnimal(a),this.drawStructure(a),this.showPosition&&this.drawBlockInfo(a)},getPolygonPoints:function(e,t,a,i,l){for(var n=[],s=l||0,r=0;r<i;++r)n.push(new this.Point(e+a*Math.sin(s),t+a*Math.cos(s))),s+=2*Math.PI/i;return n},createPolygonPath:function(e,t,a,i,l){var n=this.getPolygonPoints(e,t,a,i,l);this.ctx.beginPath(),this.ctx.moveTo(n[0].x,n[0].y);for(var s=0;s<i;++s)this.ctx.lineTo(n[s].x,n[s].y);this.ctx.closePath()},createAnimalRegion:function(e,t,a){this.createPolygonPath(e,t,.8*this.r,6,Math.PI/6),this.ctx.setLineDash([7,5]),this.ctx.strokeStyle=a,this.ctx.stroke()},createStructureRegion:function(e,t,a,i){var l=4,n=0;"stone"===a?(l=8,n=Math.PI/8):"hut"===a&&(l=3,n=Math.PI/3),this.createPolygonPath(e,t,this.r/2,l,n),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.fillStyle=i,this.ctx.fill(),this.ctx.stroke()},getNearestBlock:function(e,t){var a,i=1e7,l=null,n=Object(c["a"])(this.map_detail);try{for(n.s();!(a=n.n()).done;){var s,r=a.value,o=Object(c["a"])(r);try{for(o.s();!(s=o.n()).done;){var u=s.value,h=Math.pow(e-u.block_center_x,2)+Math.pow(t-u.block_center_y,2);h<i&&(i=h,l=u)}}catch(d){o.e(d)}finally{o.f()}}}catch(d){n.e(d)}finally{n.f()}return l},redraw_block:function(e,t){var a=e.block_center_x,i=e.block_center_y,l=e.block_x_idx,n=e.block_y_idx;"shadow"===t?(e.shadow?this.drawHexagon(a,i,e):(this.drawShadow(a,i),this.drawAnimal(e)),this.drawStructure(e),this.map_detail[n][l].shadow=!this.map_detail[n][l].shadow):(this.drawHexagon(a,i,e),e.shadow&&this.drawShadow(a,i),this.drawAnimal(e),this.drawStructure(e)),this.manual_config_mode&&this.drawDigits(),this.showPosition&&this.drawBlockInfo(e)},drawShadow:function(e,t){this.createPolygonPath(e,t,this.r,6,Math.PI/6),this.ctx.setLineDash([]),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.ctx.fillStyle="rgba(0, 0, 0, 0.75)",this.ctx.fill(),this.ctx.stroke()},drawAnimal:function(e){var t=e["block_center_x"],a=e["block_center_y"];e["bear"]?this.createAnimalRegion(t,a,"black"):e["cougar"]&&this.createAnimalRegion(t,a,"red")},drawStructure:function(e){var t=e["block_center_x"],a=e["block_center_y"];e["hut"]?this.createStructureRegion(t,a,"hut",e["hut_color"]):e["stone"]&&this.createStructureRegion(t,a,"stone",e["stone_color"])},generateClueShadow:function(){this.generateMap();for(var e=[],t=[],a=0;a<this.map_detail.length;a++){e[a]=[];for(var i=0;i<this.map_detail[0].length;i++){e[a][i]=!1;var l=!1;"terrain"===this.ownClue.type?(this.map_detail[a][i].block===this.ownClue.value1||null!==this.ownClue.value2&&this.map_detail[a][i].block===this.ownClue.value2)&&(l=!0):"animal"===this.ownClue.type?null===this.ownClue.value2?("C"===this.ownClue.value1&&this.map_detail[a][i].cougar||"B"===this.ownClue.value1&&this.map_detail[a][i].bear)&&(l=!0):(this.map_detail[a][i].bear||this.map_detail[a][i].cougar)&&(l=!0):"structType"===this.ownClue.type?("O"===this.ownClue.value1&&this.map_detail[a][i].stone||"T"===this.ownClue.value1&&this.map_detail[a][i].hut)&&(l=!0):"structColor"===this.ownClue.type&&(this.map_detail[a][i].hut&&(l=y[this.map_detail[a][i].hut_color]===this.ownClue.value1),this.map_detail[a][i].stone&&(l=y[this.map_detail[a][i].stone_color]===this.ownClue.value1)),l?(t.push(this.map_detail[a][i]),e[a][i]=!0,this.map_detail[a][i].shadow=!0):this.map_detail[a][i].shadow=!1,this.redraw_block(this.map_detail[a][i],"shadow")}}var n=0;while(n<this.ownClue.distance){n+=1;var s=[];while(0!==t.length){var r=t[0];t.splice(0,1);var o=r.block_y_idx,c=r.block_x_idx,u=c%2===0?f:p;for(var h in u){var d=u[h][0],_=u[h][1],v=o+d,m=c+_;v>=0&&v<e.length&&m>=0&&m<e[0].length&&!e[v][m]&&(e[v][m]=!0,s.push(this.map_detail[v][m]),this.map_detail[v][m].shadow=!0,this.redraw_block(this.map_detail[v][m],"shadow"))}}t=s}},checkHutExist:function(e,t){for(var a in this.hut_info)if(this.hut_info[a].x===e&&this.hut_info[a].y===t)return a;return-1},addToHut:function(e,t,a){this.hut_info.push({x:e,y:t,color:a})},removeFromHut:function(e,t){for(var a in this.hut_info)this.hut_info[a].x===e&&this.hut_info[a].y===t&&this.hut_info.splice(a,1)},checkStoneExist:function(e,t){for(var a in this.stone_info)if(this.stone_info[a].x===e&&this.stone_info[a].y===t)return a;return-1},addToStone:function(e,t,a){this.stone_info.push({x:e,y:t,color:a})},removeFromStone:function(e,t){for(var a in this.stone_info)this.stone_info[a].x===e&&this.stone_info[a].y===t&&this.stone_info.splice(a,1)},handleRChange:function(){var e=document.getElementById("canvas"),t=e.width,a=e.height;this.ctx.clearRect(0,0,t,a),this.generateMap()},randomFlip:function(){for(var e in this.board_tile_state)this.board_tile_state[e].flip=Math.random()<.5},doLayout:function(){var e=this;this.$nextTick((function(){e.$refs.clue_table.doLayout()}))}}},w=k,S=(a("351c"),a("2877")),C=Object(S["a"])(w,r,o,!1,null,"9e2c62e4",null),M=C.exports,D={name:"App",components:{Cryptid:M}},F=D,O=(a("034f"),Object(S["a"])(F,n,s,!1,null,null,null)),W=O.exports,N=a("5c96"),P=a.n(N);a("0fae");i["default"].config.productionTip=!1,i["default"].use(P.a),i["default"].use(l["a"]),Array.prototype.shuffle=function(){var e,t,a=this,i=a.length;while(i)t=Math.floor(Math.random()*i--),e=a[i],a[i]=a[t],a[t]=e;return a},new i["default"]({render:function(e){return e(W)}}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.0b3bea2e.js.map